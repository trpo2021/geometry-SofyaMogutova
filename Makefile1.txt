CC = gcc
CFLAGS = -lm -Wall -Wextra -Werror
CPPFLAGS = -I src -MP -MMD
HEADER = src/libgeometry/out.h
all: geometry
geometry: src/geometry/geometry.o obj/src/libgeometry/libgeometry.a
	$(CC) $(CFLAGS) -o $@ $^

geometry.o: src/geometry/geometry.c $(HEADER)
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $<

libgeometry.a: src/libgeometry/out.o
	ar rcs $@ $^

out.o: src/libgeometry/out.c src/libgeometry/out.h
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $<

.PHONY: clean
clean:
	rm -rf *.o geometry
